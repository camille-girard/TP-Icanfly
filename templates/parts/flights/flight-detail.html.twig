{% extends 'base.html.twig' %}

{% block title %}Détail du vol{% endblock %}

{% block body %}
    <header class="bg-cover bg-center h-96" style="background-image: url('{{ asset('images/reserve_now.jpg') }}');">
        <div class="flex justify-center items-center h-full bg-black bg-opacity-50">
            <h1 class="text-5xl font-extrabold text-white">Détail du vol</h1>
        </div>
    </header>
    <div class="container mx-auto mt-8">
        <section class="bg-white shadow-md rounded-lg p-6 mb-8">
            <h2 class="text-3xl font-bold mb-4">{{ flight.destination }}</h2>
            <p class="text-lg text-gray-700">
                <strong>Date :</strong> {{ flight.date|date("d M Y") }}
            </p>
            <p class="text-lg text-gray-700">
                <strong>Prix :</strong> {{ flight.seatPrice }} €
            </p>
            <p class="text-lg text-gray-700">
                <strong>Places disponibles :</strong> {{ flight|length }}
            </p>
            <p class="text-lg text-gray-700 mt-4">
                <strong>Description :</strong> {{ flight.description }}
            </p>
        </section>

        <section class="bg-[#1E2A38] text-white p-6 rounded-lg mb-8">
            <h2 class="text-2xl font-bold">Compte à rebours avant le lancement</h2>
            <p id="countdown" class="text-3xl font-semibold">00:00:00</p>
        </section>
        <script>
            const countdownElement = document.getElementById('countdown');
            const launchDate = new Date("{{ flight.date|date('Y-m-d H:i:s') }}").getTime();

            function updateCountdown() {
                const now = new Date().getTime();
                const distance = launchDate - now;

                if (distance <= 0) {
                    countdownElement.innerHTML = "Lancement en cours !";
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                countdownElement.innerHTML = `${days}j ${hours}h ${minutes}m ${seconds}s`;
            }

            updateCountdown();
            setInterval(updateCountdown, 1000);
        </script>

        <section class="mb-8">
            <a href="{{ path('dashboard_reservations_new') }}" class="bg-[#002EFF] text-white px-6 py-2 rounded hover:bg-[#1E2A38]">Réserver une place</a>
        </section>

    </div>
{% endblock %}
